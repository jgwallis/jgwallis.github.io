<!doctype html><html xmlns=http://www.w3.org/1999/xhtml class=no-js xml:lang=en lang=en-gb><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Using ‘ddrescue’</title><meta name=description content="<no description>"><meta name=robots content="noindex"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.83"><link rel="shortcut icon" href=https://jgwallis.github.io/favicon.ico><style>@font-face{font-family:sairasemicondensed;font-display:swap;font-variant:normal;font-weight:700;font-style:normal;src:url(https://jgwallis.github.io/fonts/SairaSemiCondensed-Medium.ttf)format('truetype')}</style><style>@font-face{font-family:open sans;font-display:swap;font-variant:normal;font-weight:400;font-style:normal;src:url(https://jgwallis.github.io/fonts/OpenSans-Regular.ttf)format('truetype')}</style><link rel=stylesheet type=text/css href=https://jgwallis.github.io/css/JGW.css><script src=https://jgwallis.github.io/js/uikit.min.js></script><script src=https://jgwallis.github.io/js/uikit-icons.min.js></script></head><body><nav class="uk-navbar-container uk-visible@m" uk-navbar role=navigation><div class=uk-navbar-center><a class="uk-navbar-item uk-logo" href=https://jgwallis.github.io/><img style=height:30px;width:167px src=https://jgwallis.github.io/images/JGW-Logo.svg alt="John Wallis Logo"></a><ul class=uk-navbar-nav><li><a href=https://jgwallis.github.io/>Home</a></li><li><a href=https://jgwallis.github.io/services/>Services</a></li><li><a href=https://jgwallis.github.io/areas/>Areas</a></li><li><a href=https://jgwallis.github.io/hours/>Hours</a></li><li><a href=https://jgwallis.github.io/reviews/>Reviews</a></li><li><a href=https://jgwallis.github.io/contact/>Contact</a></li><li><a href=https://jgwallis.github.io/prices/>Prices</a></li><li><a href=https://jgwallis.github.io/terms/>Terms</a></li><li><a href=https://jgwallis.github.io/about/>About</a></li><li><a href=https://jgwallis.github.io/real-help/>Real Help</a></li><li><a href=https://jgwallis.github.io/post/>Blog</a></li><li><a href=https://jgwallis.github.io/legal/>Legal</a></li></ul></div></nav><nav class="uk-navbar-container uk-hidden@m uk-navbar" uk-navbar><div class=uk-navbar-left><a class="uk-navbar-item uk-logo" href=https://jgwallis.github.io/index.html><img style=height:30px;width:167px src=https://jgwallis.github.io/images/JGW-Logo.svg alt="John Wallis Logo"></a></div><div class=uk-navbar-right><a class="uk-navbar-toggle uk-hidden@m uk-navbar-toggle-icon uk-icon" uk-navbar-toggle-icon uk-toggle href=#offcanvas-nav>MENU&nbsp;&nbsp;<svg width="10" height="20" viewBox="0 0 10 20" xmlns="http://www.w3.org/2000/svg" icon="navbar-toggle-icon" ratio="1"><rect y="3" width="10" height="2"/><rect y="9" width="10" height="2"/><rect y="15" width="10" height="2"/></svg></a></div></nav><div id=offcanvas-nav uk-offcanvas="overlay: true" class=uk-offcanvas><div class=uk-offcanvas-bar><ul class="uk-nav uk-nav-default"><li><a href=https://jgwallis.github.io/>Home</a></li><li><a href=https://jgwallis.github.io/services/>Services</a></li><li><a href=https://jgwallis.github.io/areas/>Areas</a></li><li><a href=https://jgwallis.github.io/hours/>Hours</a></li><li><a href=https://jgwallis.github.io/reviews/>Reviews</a></li><li><a href=https://jgwallis.github.io/contact/>Contact</a></li><li><a href=https://jgwallis.github.io/prices/>Prices</a></li><li><a href=https://jgwallis.github.io/terms/>Terms</a></li><li><a href=https://jgwallis.github.io/about/>About</a></li><li><a href=https://jgwallis.github.io/real-help/>Real Help</a></li><li><a href=https://jgwallis.github.io/post/>Blog</a></li><li><a href=https://jgwallis.github.io/legal/>Legal</a></li></ul></div></div><section class="uk-section uk-section-primary uk-section-small uk-background-cover uk-background-center-center" style=background-image:url(/images/BlueGradientV001.webp)><div class="uk-container uk-container-small"><h1 id=using-ddrescue class=uk-article-title>Using ‘ddrescue’</h1></div></section><section class="uk-section uk-section-small"><div class="uk-container uk-container-small"><p>Linux provides the &lsquo;ddrescue&rsquo; command, which can be used to
recover data from damaged &lsquo;block-based&rsquo; media such as hard
disk drives, solid-state drives, CDs, DVDs, etc.
It understands many different formats, including Windows file systems,
such as
<abbr title="File Allocation Table">FAT</abbr>
and
<abbr title="New Technology File System">NTFS</abbr>.</p><p>The &lsquo;ddrescue&rsquo; command can be run multiple times, gradually
recovering more and more data each time.
Every time you run &lsquo;ddrescue&rsquo; as part of the same data
recovery job, you specify the same map file, which effectively
keeps track of which areas containing data have been read, and
which areas have caused difficulty and are still to be
recovered.</p><p>Remember that you can find out more information from a Linux command
prompt by typing &lsquo;man ddrescue&rsquo; or read a detailed guide
by typing &lsquo;info ddrescue&rsquo;.</p><p>Here are some instructions for running multiple passes of
&lsquo;ddrescue&rsquo;:</p><ol class=jgw-list><li>During the first pass &lsquo;ddrescue&rsquo; copies as much data as
possible, without retrying hard-to-read data or splitting sectors.<br>ddrescue --no-split /dev/hda1 imagefile mapfile</li><li>The second pass of &lsquo;ddrescue&rsquo; retries reading areas of
data that proved hard to read on the first pass, using uncached
reads:<br>ddrescue --idirect --max-retries=3 /dev/hda1 imagefile mapfile</li><li>A third pass of &lsquo;ddrescue&rsquo; can be used to try again, but
retrimmed so the program tries to re-read full sectors (the
<span class=uk-text-nowrap>--retrim</span>
option marks all failed blocks as non-trimmed):<br>ddrescue --idirect --retrim --max-retries=3 /dev/hda1 imagefile mapfile</li><li>You can also replace the device /dev/hda1 with the specific partition
that you are trying to recover.
Once you do this, you can mount the imagefile like this:<br>sudo mount -t ntfs-3g -o loop,ro imagefile /mnt<br>This mounts the image read-only at the directory &lsquo;/mnt&rsquo;.</li><li>Another thing you can try is cloning the whole source hard drive to a
target hard drive using a command like:<br>ddrescue --no-split /dev/hda /dev/sdb mapfile<br></li></ol><br></div></section><section class="uk-section uk-section-small"><div class="uk-container uk-container-small"><footer><div id=footer-container class="uk-container uk-container-small"><div uk-grid class="uk-child-width-expand@s uk-flex-middle uk-grid uk-text-center uk-text-small uk-visible@m jgw-footer"><div class="uk-width-1-2@m uk-text-left uk-first-column"><h5>Copyright &copy; J. G. Wallis</h5></div><div class="uk-width-1-2@m uk-text-right"><h5>Wednesday, 10 Mar, 2021</h5></div></div><div uk-grid class="uk-child-width-expand@s uk-flex-middle uk-grid uk-text-center uk-text-small uk-hidden@m jgw-footer"><div class="uk-width-1-1@s uk-text-center uk-first-column"><h5>Copyright &copy; J. G. Wallis</h5></div><div class="uk-width-1-1@s uk-text-center"><h5>Wednesday, 10 Mar, 2021</h5></div></div></div></footer></div></section></body></html>